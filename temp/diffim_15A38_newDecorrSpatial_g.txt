CameraMapper INFO: Unable to locate calibRegistry registry in root: calibRegistry.sqlite3
CameraMapper INFO: Unable to locate calibRegistry registry in current dir: ./calibRegistry.sqlite3
CameraMapper INFO: Loading Posix registry from /Users/dreiss/DATA/HiTS_from_meredith/ingested_15A38
CameraMapper INFO: Unable to locate registry registry in root: registry.sqlite3
CameraMapper INFO: Unable to locate registry registry in current dir: ./registry.sqlite3
CameraMapper INFO: Unable to locate calibRegistry registry in root: calibRegistry.sqlite3
CameraMapper INFO: Unable to locate calibRegistry registry in current dir: ./calibRegistry.sqlite3
CameraMapper INFO: Loading Posix registry from /Users/dreiss/DATA/HiTS_from_meredith/processed_15A38
CameraMapper INFO: Unable to locate registry registry in root: registry.sqlite3
CameraMapper INFO: Unable to locate registry registry in current dir: ./registry.sqlite3
CameraMapper INFO: Unable to locate calibRegistry registry in root: calibRegistry.sqlite3
CameraMapper INFO: Unable to locate calibRegistry registry in current dir: ./calibRegistry.sqlite3
CameraMapper INFO: Loading Posix registry from /Users/dreiss/DATA/HiTS_from_meredith/diffim_15A38_newDecorrSpatial_g
root WARN: No data found for dataId=OrderedDict([('visit', 411033), ('ccdnum', 2)])
root INFO: Running: /Users/dreiss/GIT_REPOS/TICKETS/DM-9989/pipe_tasks/bin/imageDifference.py processed_15A38 --id visit=411033 ccdnum=1..3 --templateId visit=410927 --output diffim_15A38_newDecorrSpatial_g -C config.py --clobber-config --no-versions
imageDifference INFO: Processing DataId(initialdata={'visit': 411033, 'ccdnum': 1}, tag=set([]))
imageDifference.getTemplate INFO: Fetching calexp (DataId(initialdata={'ccdnum': 1, 'visit': 410927}, tag=set([]))) as template.
imageDifference INFO: Source selection via src product
/Users/dreiss/lsstsw/stack/DarwinX86/meas_algorithms/13.0-12-gfeff4b0/python/lsst/meas/algorithms/objectSizeStarSelector.py:400: RuntimeWarning: invalid value encountered in less
  bad = numpy.logical_or(bad, width < self.config.widthMin)
/Users/dreiss/lsstsw/stack/DarwinX86/meas_algorithms/13.0-12-gfeff4b0/python/lsst/meas/algorithms/objectSizeStarSelector.py:401: RuntimeWarning: invalid value encountered in greater
  bad = numpy.logical_or(bad, width > self.config.widthMax)
imageDifference INFO: Selected 40 / 1520 sources for Psf matching (11 for control sample)
imageDifference INFO: Subtracting images
imageDifference.subtract INFO: Template Wcs : 2.685407,-0.019428 -> 2.690625,-0.022033
imageDifference.subtract INFO: Science Wcs : 2.685479,-0.019446 -> 2.690699,-0.022051
imageDifference.subtract INFO: Astrometrically registering template to science image
imageDifference.subtract INFO: templateFwhmPix: 4.18339547219
imageDifference.subtract INFO: scienceFwhmPix: 4.48823885329
imageDifference.subtract INFO: Growing 40 kernel candidate stars by 21 pixels
imageDifference.subtract INFO: Selected 40 / 40 sources for KernelCandidacy
imageDifference.subtract INFO: Matching Psf FWHM 4.18 -> 4.49 pix
imageDifference.subtract INFO: Final spatial kernel sum 0.967
imageDifference.subtract INFO: Spatial model condition number 5.322e+08
imageDifference.subtract INFO: Doing stats of kernel candidates used in the spatial fit.
imageDifference.subtract INFO: 40 candidates total, 12 rejected, 28 used
imageDifference.subtract INFO: Spatial kernel model well constrained; 28 candidates, 3 terms, 27 bases
imageDifference.subtract INFO: Spatial background model appears well constrained; 28 candidates, 1 terms
imageDifference INFO: Computing diffim PSF
imageDifference INFO: Running A&L decorrelation: spatiallyVarying=True
ip_diffim_decorrelateALKernelSpatial INFO: Variance (science, template): (65.018659, 66.272833)
ip_diffim_decorrelateALKernelSpatial INFO: Variance (uncorrected diffim): 83.092885
ip_diffim_imageMapReduce INFO: Mapper sub-task: ip_diffim_decorrelateALKernelMapper
ip_diffim_imageMapReduce INFO: Scaling grid parameters by 4.488239
ip_diffim_imageMapReduce INFO: Grid parameters: 90, 90; 81, 83; 27, 27
ip_diffim_imageMapReduce INFO: Processing 1300 sub-exposures
ip_diffim_imageMapReduce INFO: Reducer sub-task: ip_diffim_ImageReducerSubtask
ip_diffim_imageMapReduce.reducerSubtask INFO: AVERAGE: Maximum overlap: 4.000000
ip_diffim_imageMapReduce.reducerSubtask INFO: AVERAGE: Average overlap: 1.135396
ip_diffim_imageMapReduce.reducerSubtask INFO: AVERAGE: Minimum overlap: 0.000000
ip_diffim_imageMapReduce.reducerSubtask INFO: AVERAGE: Number of zero pixels: 429930.000000
/Users/dreiss/GIT_REPOS/TICKETS/DM-9989/ip_diffim/python/lsst/ip/diffim/imageMapReduce.py:284: RuntimeWarning: invalid value encountered in true_divide
  newMI.getImage().getArray()[:, :] /= wts
/Users/dreiss/GIT_REPOS/TICKETS/DM-9989/ip_diffim/python/lsst/ip/diffim/imageMapReduce.py:285: RuntimeWarning: invalid value encountered in true_divide
  newMI.getVariance().getArray()[:, :] /= wts
ip_diffim_decorrelateALKernelSpatial INFO: Variance (corrected diffim): 143.513029
imageDifference INFO: Running diaSource detection
imageDifference.detection INFO: Detected 67 positive sources to 5 sigma.
imageDifference.detection INFO: Detected 74 negative sources to 5 sigma
imageDifference INFO: Merging detections into 98 sources
imageDifference INFO: Running diaSource measurement
imageDifference.measurement INFO: Measuring 98 sources (98 parents, 0 children) 
imageDifference INFO: Processing DataId(initialdata={'visit': 411033, 'ccdnum': 3}, tag=set([]))
imageDifference.getTemplate INFO: Fetching calexp (DataId(initialdata={'ccdnum': 3, 'visit': 410927}, tag=set([]))) as template.
imageDifference INFO: Source selection via src product
imageDifference INFO: Selected 39 / 1815 sources for Psf matching (10 for control sample)
imageDifference INFO: Subtracting images
imageDifference.subtract INFO: Template Wcs : 2.696246,-0.019433 -> 2.701469,-0.022046
imageDifference.subtract INFO: Science Wcs : 2.696320,-0.019449 -> 2.701544,-0.022060
imageDifference.subtract INFO: Astrometrically registering template to science image
imageDifference.subtract INFO: templateFwhmPix: 4.04286851291
imageDifference.subtract INFO: scienceFwhmPix: 4.43116455899
imageDifference.subtract INFO: Growing 39 kernel candidate stars by 21 pixels
imageDifference.subtract INFO: Selected 36 / 39 sources for KernelCandidacy
imageDifference.subtract INFO: Matching Psf FWHM 4.04 -> 4.43 pix
imageDifference.subtract INFO: Final spatial kernel sum 0.975
imageDifference.subtract INFO: Spatial model condition number 2.893e+08
imageDifference.subtract INFO: Doing stats of kernel candidates used in the spatial fit.
imageDifference.subtract INFO: 36 candidates total, 11 rejected, 25 used
imageDifference.subtract INFO: Spatial kernel model well constrained; 25 candidates, 3 terms, 27 bases
imageDifference.subtract INFO: Spatial background model appears well constrained; 25 candidates, 1 terms
imageDifference INFO: Computing diffim PSF
imageDifference INFO: Running A&L decorrelation: spatiallyVarying=True
ip_diffim_decorrelateALKernelSpatial INFO: Variance (science, template): (60.878735, 62.073134)
ip_diffim_decorrelateALKernelSpatial INFO: Variance (uncorrected diffim): 73.713203
ip_diffim_imageMapReduce INFO: Mapper sub-task: ip_diffim_decorrelateALKernelMapper
ip_diffim_imageMapReduce INFO: Scaling grid parameters by 4.431165
ip_diffim_imageMapReduce INFO: Grid parameters: 89, 89; 80, 82; 27, 27
ip_diffim_imageMapReduce INFO: Processing 1300 sub-exposures
ip_diffim_imageMapReduce INFO: Reducer sub-task: ip_diffim_ImageReducerSubtask
ip_diffim_imageMapReduce.reducerSubtask INFO: AVERAGE: Maximum overlap: 4.000000
ip_diffim_imageMapReduce.reducerSubtask INFO: AVERAGE: Average overlap: 1.156950
ip_diffim_imageMapReduce.reducerSubtask INFO: AVERAGE: Minimum overlap: 0.000000
ip_diffim_imageMapReduce.reducerSubtask INFO: AVERAGE: Number of zero pixels: 460519.000000
ip_diffim_decorrelateALKernelSpatial INFO: Variance (corrected diffim): 126.271567
imageDifference INFO: Running diaSource detection
imageDifference FATAL: Failed on dataId=DataId(initialdata={'visit': 411033, 'ccdnum': 3}, tag=set([])): cannot convert float NaN to integer
Traceback (most recent call last):
  File "/Users/dreiss/lsstsw/stack/DarwinX86/pipe_base/13.0-3-g7fa07e0+1/python/lsst/pipe/base/cmdLineTask.py", line 347, in __call__
    result = task.run(dataRef, **kwargs)
  File "/Users/dreiss/lsstsw/stack/DarwinX86/pipe_base/13.0-3-g7fa07e0+1/python/lsst/pipe/base/timer.py", line 121, in wrapper
    res = func(self, *args, **keyArgs)
  File "/Users/dreiss/GIT_REPOS/TICKETS/DM-9989/pipe_tasks/python/lsst/pipe/tasks/imageDifference.py", line 602, in run
    doSmooth=not self.config.doPreConvolve
  File "/Users/dreiss/lsstsw/stack/DarwinX86/pipe_base/13.0-3-g7fa07e0+1/python/lsst/pipe/base/timer.py", line 121, in wrapper
    res = func(self, *args, **keyArgs)
  File "/Users/dreiss/lsstsw/stack/DarwinX86/meas_algorithms/13.0-12-gfeff4b0/python/lsst/meas/algorithms/detection.py", line 277, in run
    clearMask=clearMask)
  File "/Users/dreiss/lsstsw/stack/DarwinX86/pipe_base/13.0-3-g7fa07e0+1/python/lsst/pipe/base/timer.py", line 121, in wrapper
    res = func(self, *args, **keyArgs)
  File "/Users/dreiss/lsstsw/stack/DarwinX86/meas_algorithms/13.0-12-gfeff4b0/python/lsst/meas/algorithms/detection.py", line 360, in detectFootprints
    kWidth = (int(sigma * 7 + 0.5) // 2) * 2 + 1 # make sure it is odd
ValueError: cannot convert float NaN to integer
